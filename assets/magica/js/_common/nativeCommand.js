define(["underscore","backbone","backboneCommon"],function(k,m,e){document.getElementById("commandDiv");var l=window.webkit?!0:!1,f=null,b={DATA_CLEAR_WEB_CACHE:1,DATA_REMOVE_ASSET:2,DATA_REMOVE_ASSET_FILE:3,DATA_ASSET_FILE_EXIST:4,DATA_CALL_TOUCHES_BEGIN:5,DATA_CALL_TOUCHES_MOVE:6,DATA_CALL_TOUCHES_END:7,DATA_CALL_TOUCHES_CLEAR:8,DATA_AWAKE_PURCHASE:10,DATA_PURCHASE_ITEM:11,DATA_RETRY_PURCHASE_ITEM:12,DATA_GET_SNS_USER_ID:20,DATA_GET_APP_VERSION:21,DATA_GET_DOWNLOAD_CONFIG:22,DATA_GET_DEVICE_INFO:23,
DATA_GET_ACCESS_TOKEN:24,DATA_CLOSE_APP:25,DATA_GET_FONT:30,DATA_GET_QUEST_RESULT_JSON:40,DATA_OPEN_URL:50,DATA_GET_BASE64:60,DATA_SET_CLIPBOARD:62,DATA_GET_REWARD:70,DATA_DELETE_REWARD:71,DATA_SET_FOX:80,DATA_SET_ADJUST:81,DATA_OPEN_EDIT_BOX:90,SOUND_BGM_PLAY:100,SOUND_BGM_STOP:101,SOUND_BGM_RESUME:102,SOUND_BGM_PAUSE:103,SOUND_BGM_SET_VOL:104,SOUND_BGM_GET_VOL:105,SOUND_SE_PLAY:110,SOUND_SE_STOP:111,SOUND_SE_SET_VOL:114,SOUND_SE_GET_VOL:115,SOUND_VO_PLAY:120,SOUND_VO_STOP:121,SOUND_VO_SET_VOL:124,
SOUND_VO_GET_VOL:125,SCENE_PUSH_WEBVIEW:201,SCENE_POP_WEBVIEW:202,SCENE_REPLACE_WEBVIEW:203,SCENE_PUSH_LOADING:211,SCENE_PUSH_DOWNLOAD:221,SCENE_PUSH_GACHA:231,SCENE_PUSH_PRESENT:232,SCENE_POP_GACHA:233,SCENE_PUSH_EVOLUTION:241,SCENE_PUSH_MEMORIA_COMPOSE:251,SCENE_PUSH_STORY:261,SCENE_PUSH_QUEST_STORY:262,SCENE_PUSH_BRANCH_STORY:263,SCENE_PUSH_QUEST:271,SCENE_POP_QUEST:272,SCENE_PUSH_CAMERA:280,SCENE_POP_CAMERA:281,SCENE_SWAP_CAMERA:282,SCENE_ZOOM_CAMERA:283,SCENE_CAPTURE_CAMERA:284,SCENE_PUSH_CHAT:291,
SCENE_POP_CHAT:292,SCENE_PUSH_TOP:301,SCENE_POP_TOP:302,SCENE_PUSH_GENERAL_STORY:311,SCENE_POP_GENERAL_STORY:312,SCENE_PUSH_QUEST_STORED_DATA:321,SCENE_PUSH_PROLOGUE:331,SCENE_PUSH_ANOTHER_QUEST:341,SCENE_POP_ANOTHER_QUEST:342,SCENE_PLAY_ANOTHER_QUEST:343,SCENE_PUSH_MOVIE:351,SCENE_POP_MOVIE:352,SCENE_PUSH_MOVIE_CHAR:361,SCENE_PUSH_EVENT_RAID:363,SCENE_POP_EVENT_RAID:364,SCENE_SHOW_REWARD_EVENT_RAID:365,SCENE_APP_BOSS_EVENT_RAID:366,SCENE_CANCEL_SELECTED_BOSS_EVENT_RAID:367,SCENE_PUSH_MESSAGE_EVENT_RAID:368,
SCENE_FOCUS_POINT_EVENT_RAID:369,SCENE_PUSH_EVENT_BRANCH:371,SCENE_RESUME_EVENT_BRANCH:372,SCENE_POP_EVENT_BRANCH:373,SCENE_PUSH_EVENT_SINGLE_RAID:381,SCENE_HIDE_EVENT_SINGLE_RAID:382,SCENE_SHOW_EVENT_SINGLE_RAID:383,SCENE_POP_EVENT_SINGLE_RAID:384,SCENE_ENABLE_TAP_EVENT_SINGLE_RAID:385,SCENE_PUSH_EVENT_DUNGEON:391,SCENE_POP_EVENT_DUNGEON:392,SCENE_DECIDE_EVENT_DUNGEON:393,SCENE_FOCUS_EVENT_DUNGEON:394,SCENE_PUSH_EVENT_STORY_RAID:395,SCENE_POP_EVENT_STORY_RAID:396,DISPLAY_SET_WEBVIEW_VISIBLE:400,
DISPLAY_CHANGE_BG:410,DISPLAY_REMOVE_BG:411,DISPLAY_ADD_L2D:420,DISPLAY_REMOVE_L2D:421,DISPLAY_PALY_L2D_MOTION:422,DISPLAY_ADD_MINI:430,DISPLAY_REMOVE_MINI:431,DISPLAY_PLAY_MINI_MOTION:432,DISPLAY_PLAY_COMPOSE_EFFECT:450,DISPLAY_SHOW_COMPOSE_RESULT:451,DISPLAY_HIDE_COMPOSE:452,DISPLAY_PLAY_COMPOSE_MAGIA:460,DISPLAY_PLAY_AWAKE_ABILITY:465,DISPLAY_PLAY_NORMAL_GACHA_TOP:470,DISPLAY_STOP_NORMAL_GACHA_TOP:471,DISPLAY_PLAY_MEMORIA_TOP:490,DISPLAY_STOP_MEMORIA_TOP:491,DISPLAY_PLAY_GENERAL_STORY:481,DISPLAY_PLAY_ONE_SHOT_STORY:482,
NOTI_GET_CONF_PNOTE:500,NOTI_AWAKE_PNOTE:501,NOTI_TURN_ON_PNOTE:502,NOTI_TURN_OFF_PNOTE:503,NOTI_GET_CONF_WEEKLY_QUEST:510,NOTI_TURN_ON_WEEKLY_QUEST:511,NOTI_TURN_OFF_WEEKLY_QUEST:512,NOTI_GET_CONF_AP_FULL:520,NOTI_TURN_ON_AP_FULL:521,NOTI_TURN_OFF_AP_FULL:522,NOTI_CANCEL_AP_FULL:523,NOTI_STORY_RAID_BOSS_DIED:524,DISPLAY_PLAY_FORMATION:600,DISPLAY_STOP_FORMATION:601,DISPLAY_PLAY_FORMATION_ENEMY:620,DISPLAY_STOP_FORMATION_ENEMY:621,DISPLAY_PLAY_WEEKLY_QUEST_TOP:610,DISPLAY_STOP_WEEKLY_QUEST_TOP:611,
SEND_MESSAGE_LOG:99,sendCommand:function(a){a=String(a);window.isDebug&&console.log("native:command: "+a);window.isBrowser||(a="game:"+a,e.ua.android?!window.app_ver||f&&158>f?alert(a):f&&157<f?androidCommand.jsCallback(a):(f=window.app_ver.split(".").join("")|0,158>f?alert(a):androidCommand.jsCallback(a)):l&&webkit.messageHandlers.gameCommand.postMessage(a))}},h=[{type:1,image:"tips_21001.png"},{type:1,image:"tips_21002.png"},{type:1,image:"tips_21003.png"},{type:1,image:"tips_21004.png"},{type:1,
image:"tips_21005.png"},{type:1,image:"tips_21006.png"},{type:1,image:"tips_21007.png"},{type:1,image:"tips_21008.png"},{type:1,image:"tips_21009.png"},{type:1,image:"tips_21010.png"},{type:1,image:"tips_21011.png"},{type:1,image:"tips_21012.png"},{type:1,image:"tips_21013.png"},{type:1,image:"tips_21014.png"},{type:1,image:"tips_21016.png"},{type:1,image:"tips_21017.png"},{type:1,image:"tips_21018.png"},{type:1,image:"tips_21019.png"},{type:1,image:"tips_21020.png"},{type:1,image:"tips_21021.png"},
{type:1,image:"tips_21022.png"},{type:1,image:"tips_21023.png"},{type:1,image:"tips_21024.png"},{type:1,image:"tips_21025.png"},{type:1,image:"tips_21026.png"},{type:1,image:"tips_21027.png"},{type:1,image:"tips_21028.png"},{type:1,image:"tips_21029.png"},{type:1,image:"tips_21030.png"},{type:1,image:"tips_21031.png"},{type:1,image:"tips_21033.png"},{type:1,image:"tips_21034.png"},{type:1,image:"tips_21035.png"},{type:0,title:"Missions",text:"Daily Missions change every day at midnight."},{type:0,
title:"Change Outfits",text:"Once you obtain a Magical Girl's new Outfit,@you can have her wear it on the Home Page."},{type:0,title:"Transfer Password",text:"With a transfer password, you can@restore data even from a broken device."},{type:0,title:"Before Switching to a New Device",text:"Write down the Transfer ID@and set a Password in Settings."},{type:0,title:"Charge Disk",text:"Use Charge Disks to boost DMG.@(The charge effect is stackable.)"},{type:0,title:"Puella Combo",text:"Use a hard hitting Puella Combo by@selecting 3 disks of one Magical Girl."},
{type:0,title:"Select Target",text:"Tap an Enemy to target them."},{type:0,title:"Connect",text:"When a Magical Girl attacks 3 times,@she will become ready to Connect."},{type:0,title:"Magical Formations",text:"The front line of a Formation is more prone to being@attacked. Place a Magical Girl with high DEF there."},{type:0,title:"Supports",text:"Beware: You cannot use Magia/Skills of Support@Magical Girls from Players you don't Follow."},{type:0,title:"Accele Combo",text:"Deploy an Accele Combo to greatly@increase everyone's Magia Gauges."},
{type:0,title:"Blast Combo",text:"A Blast Combo increases the@DMG inflicted during the turn."},{type:0,title:"Puella Combo",text:"Inflict even more DMG with a Puella Combo@by using 3 Disks of one Magical Girl."},{type:0,title:"Deselect Disk",text:"Tap a selected Disk to deselect it.@Then tap another Disk to replace it."},{type:0,title:"Magia",text:"Magia can be activated once@the Magia Gauge has reached 100."},{type:0,title:"Skills",text:"You can use Skills even@after a Disk is selected."},{type:0,
title:"Auto Battle",text:"You can select the Auto Battle Setting@for battles you have completed before."},{type:0,title:"Auto Battle",text:"You may select actions again after@the turn Auto Battle is disabled."},{type:0,title:"Support Pts",text:"If your team Supports others in a Quest@you earn Support Pts the next day at login."},{type:0,title:"Change Disk Design",text:"You can change the picture on Disks@on the Magical Girl's Settings Page."},{type:0,title:"Destiny Gems",text:"If you get a Magical Girl you already have,@you will get one of her Destiny Gems instead."},
{type:0,title:"Destiny Gems",text:"Use Destiny Gems to unlock a Magical Girl's Magic.@Once unlocked, her Memoria Slots will increase."},{type:0,title:"Magia Chips",text:"Destiny Gems may be traded for Magia Chips.@Exchange Magia Chips at the Shop for various Items."},{type:0,title:"Select Target",text:"You can change targets each time@you select one of the 3 Disks."},{type:0,title:"Accele Disk",text:"Start your turn with an Accele Disk to@fill Magia Gauge faster with later Disks."},{type:0,title:"Accele Disk",
text:"The later Accele Disks fill@more of the Magia Gauge."},{type:0,title:"Blast Disk",text:"The later Blast Disks@inflict more DMG."},{type:0,title:"Blast Disk",text:"There are two types of Blast Disks:@Horizontal and Vertical."},{type:0,title:"Blast Disk",text:"Note that Blast Disks do@not fill the Magia Gauge."},{type:0,title:"Disk Frequency",text:"The Leader Magical Girl's Disks@are displayed more frequently."},{type:0,title:"Doppel",text:"Magical Girls with Doppel can use them@by filling their Magia Gauge to 200."},
{type:0,title:"Enemy Details",text:"Hold down on an Enemy to see@more information on them."},{type:0,title:"Effect of Charge",text:"When you use Accele after Charge,@the Magia Gauge fills faster."},{type:0,title:"Effect of Charge",text:"When you use Blast after Charge,@the attack inflicts more DMG."},{type:0,title:"Doppel",text:"Complete the Doppel Quests of a ★5 Magical@Girl with Lvl. 5 Magia to unleash her Doppel."},{type:0,title:"Memoria",text:"4 Memoria can be equipped in total.@2 Skill Memoria and 2 Ability Memoria."},
{type:0,title:"Magia Lvl.",text:"Raise a Magical Girl's Magia Lvl. to 5 to@increase her Magia Gauge capacity to 200."},{type:0,title:"Charge Combo",text:"A Charge Combo increases@the number of Charges by 2."},{type:0,title:"Magical Girl Details",text:"Hold down on a Magical Girl during@Quests to see more information on her."},{type:0,title:"Support Team",text:"Set your Support Team to let other@Players use your Magical Girls as Supports."},{type:0,title:"30 Day Magia Pass",text:"By purchasing the 30 Day Magia Pass you can receive@5 Free Magia Stones by logging in each day."},
{type:0,title:"30 Day Magia Pass",text:"By purchasing the 30 Day Magia Pass you can receive@5 Free Magia Stones by logging in each day."}];b.clearWebCache=function(a){a=JSON.stringify({includeDiskFiles:a});a=b.DATA_CLEAR_WEB_CACHE+","+a;require(["ajaxControl"],function(a){a.ajaxPost(e.linkList.cacheClear)});this.sendCommand(a)};b.removeAsset=function(a,c){var d={};d.category=a;d.callback=c?c:"nativeCallback";a=JSON.stringify(d);this.sendCommand(b.DATA_REMOVE_ASSET+","+a)};b.removeFile=function(a){a=
JSON.stringify(a);this.sendCommand(b.DATA_REMOVE_ASSET_FILE+","+a)};b.existFile=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_ASSET_FILE_EXIST+","+a)};b.callTouchesBegin=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_CALL_TOUCHES_BEGIN+","+a)};b.callTouchesMove=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_CALL_TOUCHES_MOVE+","+a)};b.callTouchesEnd=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_CALL_TOUCHES_END+","+a)};b.callTouchesClear=function(){this.sendCommand(b.DATA_CALL_TOUCHES_CLEAR)};
b.awakePurchase=function(){this.sendCommand(b.DATA_AWAKE_PURCHASE)};b.purchaseItem=function(a){this.sendCommand(b.DATA_PURCHASE_ITEM+","+(window.isDebug?"jp.co.mynet.seed."+a.moneyCode:"com.aniplex.magireco.en.item."+a.moneyCode))};b.getSNS=function(){this.sendCommand(b.DATA_GET_SNS_USER_ID)};b.getAppVersion=function(){this.sendCommand(b.DATA_GET_APP_VERSION)};b.getDownloadConfig=function(a){this.sendCommand(b.DATA_GET_DOWNLOAD_CONFIG+(a?","+a:""))};b.getDeviceInfo=function(a){this.sendCommand(b.DATA_GET_DEVICE_INFO+
(a?","+a:""))};b.getAccessToken=function(){this.sendCommand(b.DATA_GET_ACCESS_TOKEN)};b.closeGame=function(){this.sendCommand(b.DATA_CLOSE_APP)};b.getFontData=function(){this.sendCommand(b.DATA_GET_FONT)};b.getQuestResult=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_GET_QUEST_RESULT_JSON+","+a)};b.browserOpen=function(a){this.sendCommand(b.DATA_OPEN_URL+","+a)};b.getBaseData=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_GET_BASE64+","+a)};b.copyClipboard=function(a){this.sendCommand(b.DATA_SET_CLIPBOARD+
","+a.toString())};b.getRewardPrm=function(){this.sendCommand(b.DATA_GET_REWARD+",nativeCallback")};b.deleteRewardPrm=function(){this.sendCommand(b.DATA_DELETE_REWARD)};b.setFoxData=function(a){a=JSON.stringify(a);this.sendCommand(b.DATA_SET_FOX+","+a)};b.setAdjustData=function(a){window.app_ver&&e.versionCheck(window.app_ver,"\x3e\x3d","1.0.16")&&(a=JSON.stringify(a),this.sendCommand(b.DATA_SET_ADJUST+","+a))};b.openKeyBoard=function(a,c,d,e){var g={};g.text=a?a:"";c&&0<c&&(g.maxLength=Number(c));
d&&0<d&&(g.keyboardType=1);e&&(g.callback=e);a=JSON.stringify(g);this.sendCommand(b.DATA_OPEN_EDIT_BOX+","+a)};b.startBgm=function(a,c){c||(e.bgm=a);this.sendCommand(b.SOUND_BGM_PLAY+","+a)};b.stopBgm=function(){this.sendCommand(b.SOUND_BGM_STOP)};b.setBGMVolume=function(a){this.sendCommand(b.SOUND_BGM_SET_VOL+","+a)};b.getBGMVolume=function(a){this.sendCommand(b.SOUND_BGM_GET_VOL+(a?","+a:""))};b.startSe=function(a){this.sendCommand(b.SOUND_SE_PLAY+","+a)};b.setSEVolume=function(a){this.sendCommand(b.SOUND_SE_SET_VOL+
","+a)};b.getSEVolume=function(a){this.sendCommand(b.SOUND_SE_GET_VOL+(a?","+a:""))};b.startVoice=function(a){this.sendCommand(b.SOUND_VO_PLAY+","+a)};b.stopVoice=function(){this.sendCommand(b.SOUND_VO_STOP)};b.setVOVolume=function(a){this.sendCommand(b.SOUND_VO_SET_VOL+","+a)};b.getVOVolume=function(a){this.sendCommand(b.SOUND_VO_GET_VOL+(a?","+a:""))};b.killWebView=function(){this.sendCommand(b.SCENE_POP_WEBVIEW)};b.nativeReload=function(a){var c={};c.url="/magica/index.html"+a;c.isNeedNativeRequest=
!0;a=JSON.stringify(c);this.sendCommand(b.SCENE_REPLACE_WEBVIEW+","+a)};b.startLoading=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_LOADING+","+a)};b.downloadFile=function(a,c){if("common"!==a){var d={};console.log(a.indexOf("movie"));d.category=a;c&&(d.isVisibleCancel=c.isVisibleCancel?!0:!1,d.description=c.description&&c.isVisibleCancel?-1<a.indexOf("movie")?"Downloading Video Data":-1<a.indexOf("voice")?"Downloading Voice Data":c.description:"",d.note=c.note&&c.isVisibleCancel?
-1<a.indexOf("movie")?"※Movie Data can also be downloaded at a later time.\n※Wi-Fi is recommended for this download.":c.note:"");a=JSON.stringify(d)}else a="common";this.sendCommand(b.SCENE_PUSH_DOWNLOAD+","+a)};b.downloadFileConfigPage=function(a,c){b.downloadFile(a,c)};b.downloadFileFullVoice=function(a){var c={};c.category=a;c.isNeedConfirm=!0;a=JSON.stringify(c);this.sendCommand(b.SCENE_PUSH_DOWNLOAD+","+a)};b.startGachaAnimation=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_GACHA+
","+a)};b.startPresentAnimation=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_PRESENT+","+a)};b.endGachaAnimation=function(){this.sendCommand(b.SCENE_POP_GACHA)};b.startEvolution=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVOLUTION+","+a)};b.startMemoriaAnimation=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_MEMORIA_COMPOSE+","+a)};b.startStory=function(a,c){var d=e.storage.user.get("tutorialId"),f={};f.storyId=a;e.storage.user&&"TU999"==d&&(f.userName=
e.storage.user.toJSON().loginName);"TU998"==d&&"101103-10"==a&&(f.canSkip=!1);c&&k.each(c,function(a,b){f[b]=a});a=JSON.stringify(f);this.sendCommand(b.SCENE_PUSH_STORY+","+a)};b.startQuestStory=function(a){var c=e.storage.user.get("tutorialId"),d={};d.storyId=a;e.storage.user&&"TU999"==c&&(d.userName=e.storage.user.toJSON().loginName);"TU998"==c&&"101103-10"==a&&(d.canSkip=!1);a=JSON.stringify(d);this.sendCommand(b.SCENE_PUSH_QUEST_STORY+","+a)};b.startBranchStory=function(a){var c=e.storage.user.get("tutorialId");
e.storage.user&&"TU999"==c&&(a.userName=e.storage.user.get("loginName"));a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_BRANCH_STORY+","+a)};b.startQuest=function(a,c){var d={};d.questId=a;c?(d.resultUrl=c.resultUrl,d.retireUrl=c.retireUrl):(d.resultUrl="/magica/index.html#/QuestResult",d.retireUrl="/magica/index.html#/MainQuest");d.tips=h[Math.floor(Math.random()*h.length)];a=JSON.stringify(d);this.sendCommand(b.SCENE_PUSH_QUEST+","+a)};b.endQuest=function(){this.sendCommand(b.SCENE_POP_QUEST)};
b.startArena=function(a){a.tips=h[Math.floor(Math.random()*h.length)];a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_QUEST+","+a)};b.endArena=function(){this.sendCommand(b.SCENE_POP_QUEST)};b.startChat=function(){this.sendCommand(b.SCENE_PUSH_CHAT+",0")};b.endChat=function(){this.sendCommand(b.SCENE_POP_CHAT+",0")};b.startTop=function(){this.sendCommand(b.SCENE_PUSH_TOP)};b.endTop=function(){this.sendCommand(b.SCENE_POP_TOP)};b.startL2d=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_GENERAL_STORY+
","+a)};b.endL2d=function(){this.sendCommand(b.SCENE_POP_GENERAL_STORY)};b.checkQuestStored=function(){this.sendCommand(b.SCENE_PUSH_QUEST_STORED_DATA+",saveDataCallback")};b.startPrologue=function(a){a=JSON.stringify({beginningId:a});this.sendCommand(b.SCENE_PUSH_PROLOGUE+","+a)};b.showSubQuestBg=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_ANOTHER_QUEST+","+a)};b.hideSubQuestBg=function(){this.sendCommand(b.SCENE_POP_ANOTHER_QUEST)};b.moveSubQuestBg=function(a,c){a=JSON.stringify({focusId:Number(a),
isRightRotation:c});this.sendCommand(b.SCENE_PLAY_ANOTHER_QUEST+","+a)};b.playCharaMovie=function(a){a=String(a);a=-1!==a.indexOf(".usm")?a:"movie_"+a+".usm";this.sendCommand(b.SCENE_PUSH_MOVIE_CHAR+","+a)};b.playMovie=function(a){a=String(a);a=-1!==a.indexOf(".usm")?a:"movie_"+a+".usm";this.sendCommand(b.SCENE_PUSH_MOVIE+","+a)};b.endPlayMovie=function(){this.sendCommand(b.SCENE_POP_MOVIE)};b.pushEventRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVENT_RAID+","+a)};b.hideEventRaid=
function(){this.sendCommand(b.SCENE_POP_EVENT_RAID)};b.showRewardEventRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_SHOW_REWARD_EVENT_RAID+","+a)};b.appBossEventRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_APP_BOSS_EVENT_RAID+","+a)};b.cancelSelectBossEventRaid=function(){this.sendCommand(b.SCENE_CANCEL_SELECTED_BOSS_EVENT_RAID)};b.pushMessageEventRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_MESSAGE_EVENT_RAID+","+a)};b.focusPointEventRaid=function(a){a=
JSON.stringify(a);this.sendCommand(b.SCENE_FOCUS_POINT_EVENT_RAID+","+a)};b.pushEventBranch=function(a,c,d){a={questList:a};c&&(a.centerPointId=c);d&&(a.newPointIdList=d);c=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVENT_BRANCH+","+c)};b.pushMainQuestEventBranch=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVENT_BRANCH+","+a)};b.resumeEventBranch=function(){this.sendCommand(b.SCENE_RESUME_EVENT_BRANCH)};b.popEventBranch=function(){this.sendCommand(b.SCENE_POP_EVENT_BRANCH)};
b.pushEventSingleRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVENT_SINGLE_RAID+","+a)};b.hideEventSingleRaid=function(){this.sendCommand(b.SCENE_HIDE_EVENT_SINGLE_RAID)};b.resumeEventSingleRaid=function(){this.sendCommand(b.SCENE_SHOW_EVENT_SINGLE_RAID)};b.popEventSingleRaid=function(){this.sendCommand(b.SCENE_POP_EVENT_SINGLE_RAID)};b.enableTapEventSingleRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_ENABLE_TAP_EVENT_SINGLE_RAID+","+a)};b.pushEventDungeon=function(a){a=
JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVENT_DUNGEON+","+a)};b.hideEventDungeon=function(){this.sendCommand(b.SCENE_POP_EVENT_DUNGEON)};b.decideEventDungeon=function(){this.sendCommand(b.SCENE_DECIDE_EVENT_DUNGEON)};b.positionResetEventDungeon=function(){this.sendCommand(b.SCENE_FOCUS_EVENT_DUNGEON)};b.pushEventStoryRaid=function(a){a=JSON.stringify(a);this.sendCommand(b.SCENE_PUSH_EVENT_STORY_RAID+","+a)};b.popEventStoryRaid=function(){this.sendCommand(b.SCENE_POP_EVENT_STORY_RAID)};b.setWebView=
function(a){this.sendCommand(b.DISPLAY_SET_WEBVIEW_VISIBLE+","+(void 0!==a?a:!0))};b.changeBg=function(a,c){c=c||!1;"web_black.jpg"!==a&&(e.background=a);var d={};d.filename=a;-1!==a.indexOf("web_")?d.filedir="resource/image_native/bg/web/":-1!==a.indexOf("adv_")?d.filedir="resource/image_native/bg/story/":-1!==a.indexOf("map_")?d.filedir="resource/image_native/bg/quest_top/":d.filedir="resource/image_native/bg/web/doppelMission/";d.isPortrait=c;-1!==a.indexOf("map_")?(d.fade={},d.fade.type=0,d.fade.time=
.3):(d.fade={},d.fade.type=0,d.fade.time=.2);a=JSON.stringify(d);this.sendCommand(b.DISPLAY_CHANGE_BG+","+a)};b.removeBg=function(){this.sendCommand(b.DISPLAY_REMOVE_BG)};b.showL2d=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_ADD_L2D+","+a)};b.hideL2d=function(){this.sendCommand(String(b.DISPLAY_REMOVE_L2D))};b.motionL2d=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PALY_L2D_MOTION+","+a)};b.showMiniChara=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_ADD_MINI+
","+a)};b.hideMiniChara=function(){this.sendCommand(b.DISPLAY_REMOVE_MINI)};b.touchMiniChara=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_MINI_MOTION+","+a)};b.playComposeEffect=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_COMPOSE_EFFECT+","+a)};b.playComposeResultEffect=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_SHOW_COMPOSE_RESULT+","+a)};b.stopComposeEffect=function(){this.sendCommand(b.DISPLAY_HIDE_COMPOSE)};b.playComposeMagiaEffect=function(a){a=
JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_COMPOSE_MAGIA+","+a)};b.playCustomizeEffect=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_AWAKE_ABILITY+","+a)};b.playNormalGachaMemoria=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_NORMAL_GACHA_TOP+","+a)};b.stopNormalGachaMemoria=function(){this.sendCommand(b.DISPLAY_STOP_NORMAL_GACHA_TOP)};b.displayMemoriaTop=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_MEMORIA_TOP+","+a)};b.stopMemoriaTop=
function(){this.sendCommand(b.DISPLAY_STOP_MEMORIA_TOP)};b.storyMotionL2dVoice=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_GENERAL_STORY+","+a)};b.storyMotionL2d=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_ONE_SHOT_STORY+","+a)};b.noticeGetStatus=function(a){this.sendCommand(b.NOTI_GET_CONF_PNOTE+(a?","+a:""))};b.noticeRegist=function(a){a=a?b.NOTI_AWAKE_PNOTE+","+JSON.stringify(a):b.NOTI_AWAKE_PNOTE;this.sendCommand(a)};b.noticeTurnOn=function(a){a=a?b.NOTI_TURN_ON_PNOTE+
","+JSON.stringify(a):b.NOTI_TURN_ON_PNOTE;this.sendCommand(a)};b.noticeRestore=function(){this.sendCommand(b.NOTI_TURN_OFF_PNOTE)};b.noticeGetWeekly=function(a){this.sendCommand(b.NOTI_GET_CONF_WEEKLY_QUEST+(a?","+a:""))};b.noticeSetWeekly=function(a){a=JSON.stringify(a);this.sendCommand(b.NOTI_TURN_ON_WEEKLY_QUEST+","+a)};b.noticeOffWeekly=function(a){this.sendCommand(b.NOTI_TURN_OFF_WEEKLY_QUEST+","+a)};b.noticeApConfig=function(a){this.sendCommand(b.NOTI_GET_CONF_AP_FULL+(a?","+a:""))};b.noticeApFullSet=
function(a){this.sendCommand(0<a?b.NOTI_TURN_ON_AP_FULL+","+a:b.NOTI_CANCEL_AP_FULL)};b.noticeApFullTurnOn=function(){this.sendCommand(b.NOTI_TURN_ON_AP_FULL+",0")};b.noticeApFullOff=function(){this.sendCommand(b.NOTI_TURN_OFF_AP_FULL)};b.noticeStoryRaidBossDied=function(a){a=JSON.stringify(a);this.sendCommand(b.NOTI_STORY_RAID_BOSS_DIED+","+a)};b.formationPreview=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_FORMATION+","+a)};b.formationPreviewRemove=function(){this.sendCommand(b.DISPLAY_STOP_FORMATION)};
b.enemyFormationPreview=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_FORMATION_ENEMY+","+a)};b.enemyFormationPreviewRemove=function(){this.sendCommand(b.DISPLAY_STOP_FORMATION_ENEMY)};b.weekQuestTopSet=function(a){a=JSON.stringify(a);this.sendCommand(b.DISPLAY_PLAY_WEEKLY_QUEST_TOP+","+a)};b.weekQuestTopUnset=function(){this.sendCommand(b.DISPLAY_STOP_WEEKLY_QUEST_TOP)};b.sendMessageLog=function(a){window.isDebug&&window.app_ver&&e.versionCheck(window.app_ver,"\x3e\x3d","1.1.13")&&
(a=JSON.stringify(a),this.sendCommand(b.SEND_MESSAGE_LOG+","+a))};b.turnOnCamera=function(){this.sendCommand(b.SCENE_PUSH_CAMERA)};b.turnOffCamera=function(){this.sendCommand(b.SCENE_POP_CAMERA)};b.swapCamera=function(){this.sendCommand(b.SCENE_SWAP_CAMERA)};b.zoomCamera=function(a){var c={};c.ratio=a;a=JSON.stringify(c);this.sendCommand(b.SCENE_ZOOM_CAMERA+","+a)};b.captureCamera=function(){this.sendCommand(b.SCENE_CAPTURE_CAMERA)};return b});